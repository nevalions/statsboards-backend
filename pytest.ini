[pytest]
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
log_cli = false
log_cli_level = WARNING
log_file = pytest.log
log_file_level = WARNING
log_level = WARNING
# Performance optimizations
# Removed Alembic migrations - biggest speedup (60-90s saved)
# -x: stop on first failure (good for development)
# -v: verbose output
# --tb=short: shortened traceback format
# --disable-warnings: faster output
# --no-cov: disable coverage collection for speed
# --asyncio-mode=auto: allow running async tests without decorators in some cases
# -m "not integration": skip integration tests by default (run with -m integration to enable)
addopts = -x -v --tb=short --disable-warnings -m "not integration"

markers =
    integration: marks tests as integration tests that download from real websites or write to main upload folder (skip by default, run with -m integration)
    benchmark: marks tests as performance benchmarks (run with -m benchmark)
    slow: marks tests as slow-running tests (run with -m "not slow" to skip)
